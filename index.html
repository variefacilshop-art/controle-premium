<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Controle Premium</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- PDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.5.31/dist/jspdf.plugin.autotable.min.js"></script>

  <style>
    :root{
      --bg1:#020617; --bg2:#0b1225;
      --card: rgba(7, 12, 26, .78);
      --card2: rgba(7, 12, 26, .60);
      --stroke: rgba(148, 163, 184, .14);
      --text: #e5e7eb; --muted: rgba(226, 232, 240, .72);
      --cyan:#00c2ff; --cyan2:#33d2ff;
      --red:#ef4444; --green:#22c55e; --amber:#f59e0b;
      --shadow: 0 20px 80px rgba(0,0,0,.55);
      --glow: 0 0 0 1px rgba(0,194,255,.18), 0 0 60px rgba(0,194,255,.12);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% -10%, rgba(0,194,255,.16), transparent 55%),
        radial-gradient(900px 700px at 90% 20%, rgba(99,102,241,.10), transparent 55%),
        radial-gradient(900px 700px at 40% 120%, rgba(34,197,94,.08), transparent 55%),
        linear-gradient(180deg, var(--bg2), var(--bg1));
      display:flex; justify-content:center;
      padding: 34px 18px;
    }
    .wrap{ width: 100%; max-width: 1120px; }
    .topbar{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom: 14px;}
    .brand{
      display:flex; align-items:center; gap:12px;
      padding: 14px 16px; border-radius: 999px;
      background: rgba(2,6,23,.55);
      border: 1px solid var(--stroke);
      backdrop-filter: blur(10px);
      box-shadow: var(--glow);
    }
    .diamond{
      width: 34px; height: 34px; display:grid; place-items:center;
      border-radius: 12px;
      background: rgba(0,194,255,.12);
      border: 1px solid rgba(0,194,255,.25);
    }
    .brand h1{ margin:0; font-size: 16px; letter-spacing:.2px; }
    .brand p{ margin:0; font-size: 12px; color: var(--muted); margin-top:2px; }
    .right{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end; }
    .pill{
      display:flex; gap:10px; align-items:center;
      padding: 10px 12px; border-radius: 999px;
      background: rgba(2,6,23,.55);
      border: 1px solid var(--stroke);
      backdrop-filter: blur(10px);
      color: var(--muted);
      font-size: 12px;
    }
    .btn{
      border:none; cursor:pointer; border-radius: 12px;
      padding: 10px 14px; font-weight: 900; font-size: 13px;
      transition: transform .06s ease, opacity .2s ease;
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px); }
    .btn-primary{ background: linear-gradient(180deg, var(--cyan2), var(--cyan)); color:#001018; box-shadow: 0 16px 60px rgba(0,194,255,.20); }
    .btn-danger{ background: linear-gradient(180deg, #ff6b6b, var(--red)); color:#fff; box-shadow: 0 16px 60px rgba(239,68,68,.20); }
    .btn-ghost{
      background: rgba(2,6,23,.35);
      border: 1px solid rgba(148,163,184,.14);
      color: rgba(226,232,240,.85);
    }
    .btn[disabled]{ opacity:.55; cursor:not-allowed; }
    .btn-icon{ width: 36px; height: 36px; padding: 0; border-radius: 12px; font-weight: 900; }
    .btn-icon-danger{ background: rgba(239,68,68,.12); border: 1px solid rgba(239,68,68,.22); color: #ffb4b4; }
    .btn-icon-edit{ background: rgba(0,194,255,.10); border: 1px solid rgba(0,194,255,.22); color: rgba(200,245,255,.95); }

    .tabs{ display:flex; gap:10px; align-items:center; margin: 10px 0 16px; flex-wrap:wrap; }
    .tab{
      padding: 10px 14px; border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(2,6,23,.45);
      color: var(--muted);
      cursor:pointer;
      font-weight: 900;
      font-size: 12px;
    }
    .tab.active{
      background: rgba(0,194,255,.14);
      border-color: rgba(0,194,255,.25);
      color: var(--text);
      box-shadow: 0 0 0 1px rgba(0,194,255,.10);
    }

    .grid{ display:grid; grid-template-columns: 1fr 1.25fr; gap: 16px; }
    @media (max-width: 960px){ .grid{ grid-template-columns: 1fr; } }

    .dashGrid{ display:grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media (max-width: 960px){ .dashGrid{ grid-template-columns: 1fr; } }

    .card{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: 0 20px 80px rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .card .head{
      padding: 16px 16px 12px;
      border-bottom: 1px solid rgba(148,163,184,.10);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      flex-wrap:wrap;
    }
    .card .head h2{ margin:0; font-size: 14px; letter-spacing:.2px; }
    .card .head span{ color: var(--muted); font-size: 12px; }
    .card .body{ padding: 16px; }

    .field{ display:flex; flex-direction:column; gap:6px; margin-bottom: 12px; }
    label{ font-size: 12px; color: var(--muted); }
    input, select{
      width:100%; padding: 12px 12px; border-radius: 12px;
      border: 1px solid rgba(148,163,184,.14);
      background: rgba(2,6,23,.55);
      color: var(--text);
      outline: none;
    }
    select{ cursor:pointer; }
    input::placeholder{ color: rgba(226,232,240,.45); }
    input:focus, select:focus{ border-color: rgba(0,194,255,.35); box-shadow: 0 0 0 4px rgba(0,194,255,.10); }

    .row{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 520px){ .row{ grid-template-columns: 1fr; } }

    .hint{ font-size: 12px; color: rgba(226,232,240,.55); margin-top: 4px; }

    .summary{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .kpi{
      background: var(--card2);
      border: 1px solid rgba(148,163,184,.10);
      border-radius: 16px;
      padding: 14px;
    }
    .kpi .k{ font-size: 12px; color: var(--muted); margin-bottom: 6px; }
    .kpi .v{ font-size: 18px; font-weight: 900; letter-spacing:.2px; }
    .kpi .v.green{ color: var(--green); }
    .kpi .v.red{ color: #ff8080; }

    .list{ max-height: 520px; overflow:auto; }
    .item{
      display:flex; justify-content:space-between; gap:12px;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(148,163,184,.10);
      align-items:center;
    }
    .item:last-child{ border-bottom:none; }
    .leftcol{ display:flex; flex-direction:column; gap:6px; min-width:0; flex:1; }
    .desc{ font-weight: 800; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .meta{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .badge{
      font-size: 11px; color: rgba(226,232,240,.75);
      padding: 4px 8px; border-radius: 999px;
      border: 1px solid rgba(148,163,184,.14);
      background: rgba(2,6,23,.40);
    }
    .badge.in{ border-color: rgba(34,197,94,.28); background: rgba(34,197,94,.10); }
    .badge.out{ border-color: rgba(239,68,68,.28); background: rgba(239,68,68,.10); }
    .badge.cat{ border-color: rgba(0,194,255,.22); background: rgba(0,194,255,.08); }

    .rightcol{ display:flex; align-items:center; gap:10px; }
    .amount{ font-weight: 900; white-space: nowrap; font-size: 14px; }
    .amount.pos{ color: var(--green); }
    .amount.neg{ color: #ff8080; }
    .empty{ padding: 18px 16px; color: rgba(226,232,240,.60); font-size: 13px; }
    .hidden{ display:none !important; }

    .toast{
      position: fixed; left: 18px; bottom: 18px;
      max-width: 560px;
      background: rgba(2,6,23,.90);
      border: 1px solid rgba(148,163,184,.18);
      border-radius: 14px;
      padding: 12px 12px;
      box-shadow: 0 20px 60px rgba(0,0,0,.45);
      display:none;
      gap:10px;
      align-items:flex-start;
      z-index: 9999;
    }
    .toast.show{ display:flex; }
    .toast b{ display:block; margin-bottom:2px; }
    .toast .small{ font-size: 12px; color: rgba(226,232,240,.75); }

    .modalOverlay{
      position: fixed; inset: 0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center; justify-content:center;
      padding: 18px;
      z-index: 9998;
    }
    .modalOverlay.show{ display:flex; }
    .modal{
      width: 100%;
      background: rgba(2,6,23,.92);
      border: 1px solid rgba(148,163,184,.18);
      border-radius: 18px;
      box-shadow: 0 30px 120px rgba(0,0,0,.65);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      max-height: calc(100vh - 36px);
    }
    .modal.sm{ max-width: 620px; }
    .modal.lg{ max-width: 1100px; }

    .modalHead{
      padding: 14px 16px;
      border-bottom: 1px solid rgba(148,163,184,.12);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      flex: 0 0 auto;
    }
    .modalHead h3{ margin:0; font-size: 14px; letter-spacing:.2px; }

    .modalBody{
      padding: 16px;
      color: rgba(226,232,240,.80);
      font-size: 13px;
      overflow:auto;
      flex: 1 1 auto;
      min-height: 0;
    }
    .modalFoot{
      padding: 14px 16px;
      border-top: 1px solid rgba(148,163,184,.12);
      display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap;
      flex: 0 0 auto;
      background: rgba(2,6,23,.92);
    }

    .catBox{
      background: rgba(2,6,23,.35);
      border: 1px solid rgba(148,163,184,.12);
      border-radius: 16px;
      padding: 12px;
      margin-top: 12px;
    }
    .searchBox{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      margin-top: 10px;
    }
    .searchBox input{ flex: 1; min-width: 220px; }
    .smallNote{ font-size: 12px; color: rgba(226,232,240,.60); }

    .dropZone{
      border: 1px dashed rgba(0,194,255,.35);
      background: rgba(0,194,255,.06);
      border-radius: 16px;
      padding: 12px;
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      flex-wrap:wrap;
    }
    .dropZone strong{ font-size: 13px; }
    .dropZone span{ font-size: 12px; color: rgba(226,232,240,.70); }

    .dashControls{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; width:100%; }
    .toggle{
      display:flex; gap:8px; align-items:center;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,.14);
      background: rgba(2,6,23,.40);
      color: rgba(226,232,240,.80);
      font-size: 12px;
      user-select: none;
    }
    .toggle input{ width:auto; margin:0; }
    .multiMonths{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; width:100%; }
    .multiMonths select{ min-height: 120px; padding: 10px; }

    /* OFX */
    .ofxTopRow{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      justify-content:space-between;
      margin-bottom: 10px;
    }
    .ofxTopRow .left{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .ofxNote{ font-size:12px; color: rgba(226,232,240,.70); }
    .ofxTableWrap{
      width:100%;
      overflow:auto;
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,.12);
      background: rgba(2,6,23,.35);
    }
    table.ofx{ width: 100%; border-collapse: collapse; min-width: 980px; }
    table.ofx th, table.ofx td{
      padding: 10px 10px;
      border-bottom: 1px solid rgba(148,163,184,.10);
      vertical-align: middle;
      white-space: nowrap;
    }
    table.ofx th{
      position: sticky;
      top: 0;
      background: rgba(2,6,23,.92);
      z-index: 2;
      font-size: 12px;
      color: rgba(226,232,240,.80);
      text-align: left;
    }
    table.ofx td input, table.ofx td select{ padding: 10px 10px; border-radius: 12px; }
    .ofxDesc{ min-width: 260px; width: 100%; }
    .ofxMoney{ width: 120px; }
    .ofxDate{ width: 140px; }
    .ofxCheck{ width: 44px; text-align: center; }

    /* multi delete checkbox */
    .chkRow{
      width: 18px; height: 18px;
      accent-color: var(--cyan);
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div class="brand">
        <div class="diamond">üíé</div>
        <div>
          <h1>Controle Premium</h1>
          <p>Valores em Real (R$) ‚Ä¢ Pessoal</p>
        </div>
      </div>

      <div class="right">
        <div class="pill" id="pillEmail">N√£o logado</div>
        <button class="btn btn-danger hidden" id="btnSair" type="button">Sair</button>
      </div>
    </div>

    <div class="tabs hidden" id="tabs">
      <button class="tab active" id="tabFin" type="button">Finan√ßas</button>
      <button class="tab" id="tabVendas" type="button">Vendas</button>
      <button class="tab" id="tabEstoque" type="button">Estoque</button>
      <button class="tab" id="tabFornec" type="button">Fornecedores</button>
      <button class="tab" id="tabCat" type="button">Categorias</button>
      <button class="tab" id="tabMeta" type="button">Metas</button>
      <button class="tab" id="tabDash" type="button">Dashboard</button>
    </div>

    <!-- LOGIN -->
    <div class="card" id="loginBox">
      <div class="head">
        <h2>Entrar</h2>
        <span>Login com Google</span>
      </div>
      <div class="body">
        <button class="btn btn-primary" id="btnLogin" type="button">Entrar com Google</button>
        <div class="hint">Cache: <strong>Ctrl + Shift + R</strong></div>
      </div>
    </div>

    <!-- FINAN√áAS -->
    <div class="grid hidden" id="financasBox">
      <div class="card">
        <div class="head">
          <div>
            <h2>Adicionar lan√ßamento</h2>
            <span>CSV + OFX + Bancos</span>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
            <button class="btn btn-ghost" id="btnGerenciarBancos" type="button">üè¶ Gerenciar bancos</button>
          </div>
        </div>

        <div class="body">
          <div class="field">
            <label>M√™s selecionado</label>
            <select id="mesSelect"></select>
          </div>

          <div class="row">
            <div class="field">
              <label>Filtro de categoria</label>
              <select id="filtroCategoria"></select>
            </div>
            <div class="field">
              <label>Tipo</label>
              <select id="tipo">
                <option value="entrada">Entrada</option>
                <option value="saida">Sa√≠da</option>
              </select>
            </div>
          </div>

          <div class="field">
            <label>Banco</label>
            <select id="bancoSelect"></select>
            <div class="hint">Voc√™ pode deixar ‚ÄúSem banco‚Äù.</div>
          </div>

          <div class="row">
            <div class="field">
              <label>Data (DD/MM/AAAA)</label>
              <input id="data" placeholder="Ex: 03/02/2026" />
            </div>
            <div class="field">
              <label>Valor (R$)</label>
              <input id="valor" type="number" placeholder="Ex: 100 (sempre positivo)" />
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label>Categoria</label>
              <select id="categoria"></select>
            </div>
            <div class="field">
              <label>Descri√ß√£o</label>
              <input id="descricao" placeholder="Ex: Venda Shopify, Mercado, Uber..." />
            </div>
          </div>

          <button class="btn btn-primary" id="btnSalvar" type="button">Salvar lan√ßamento</button>
          <div class="hint">Sa√≠da vira negativo automaticamente. Meta usa s√≥ entradas.</div>

          <div style="height:14px"></div>

          <div class="summary">
            <div class="kpi"><div class="k">Entradas</div><div class="v green" id="kpiEntradas">R$ 0,00</div></div>
            <div class="kpi"><div class="k">Sa√≠das</div><div class="v red" id="kpiSaidas">R$ 0,00</div></div>
            <div class="kpi"><div class="k">Saldo</div><div class="v" id="kpiSaldo">R$ 0,00</div></div>
            <div class="kpi"><div class="k">Registros</div><div class="v" id="kpiQtd">0</div></div>
          </div>

          <div class="catBox">
            <div class="dropZone" id="dropZone">
              <div>
                <strong>üì• Importar CSV</strong><br/>
                <span>Colunas: Data;Tipo;Categoria;Descri√ß√£o;Valor</span>
              </div>
              <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
                <input id="fileCsv" type="file" accept=".csv,text/csv" class="hidden" />
                <button class="btn btn-ghost" id="btnImportar" type="button">Selecionar CSV</button>
              </div>
            </div>
            <div class="hint" id="importInfo">Voc√™ pode arrastar o arquivo CSV aqui tamb√©m.</div>
          </div>

          <div class="catBox">
            <div class="dropZone" id="dropZoneOfx">
              <div>
                <strong>üè¶ Importar OFX</strong><br/>
                <span>Voc√™ poder√° revisar e editar antes de lan√ßar</span>
              </div>
              <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
                <input id="fileOfx" type="file" accept=".ofx,application/x-ofx,text/plain" class="hidden" />
                <button class="btn btn-ghost" id="btnImportarOfx" type="button">Selecionar OFX</button>
              </div>
            </div>
            <div class="hint" id="ofxInfo">Dica: escolha um banco acima para vincular as transa√ß√µes.</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="head">
          <div>
            <h2>Movimenta√ß√µes</h2>
            <span>Buscar + Editar + Exportar + Excluir em lote</span>
          </div>
          <div class="headActions" style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
            <button class="btn btn-ghost" id="btnToggleLote" type="button">‚úÖ Selecionar</button>
            <button class="btn btn-danger hidden" id="btnExcluirSelecionados" type="button">üóëÔ∏è Excluir selecionados</button>
            <button class="btn btn-ghost" id="btnPdf" type="button">üìÑ Gerar PDF (Premium)</button>
            <button class="btn btn-ghost" id="btnExportar" type="button">‚¨áÔ∏è Exportar CSV</button>
          </div>
        </div>
        <div class="body" style="padding-top:12px">
          <div class="searchBox">
            <input id="busca" placeholder="üîé Buscar na descri√ß√£o (ex: mercado, fornecedor, venda...)" />
            <div class="smallNote" id="buscaInfo">Mostrando tudo</div>
          </div>
          <div class="hint hidden" id="loteHint" style="margin-top:8px">Modo sele√ß√£o ativo ‚Ä¢ Marque os itens e clique em ‚ÄúExcluir selecionados‚Äù.</div>
        </div>
        <div class="list" id="lista">
          <div class="empty">Nenhum registro neste m√™s.</div>
        </div>
      </div>
    </div>

    <!-- VENDAS -->
    <div class="hidden" id="vendasBox">
      <div class="grid">
        <div class="card">
          <div class="head">
            <div>
              <h2>Nova venda</h2>
              <span>Data ‚Ä¢ Canal ‚Ä¢ Produto ‚Ä¢ Margem/Markup autom√°ticos</span>
            </div>
          </div>
          <div class="body">
            <div class="row">
              <div class="field">
                <label>Data (DD/MM/AAAA)</label>
                <input id="vData" placeholder="Ex: 03/02/2026" />
              </div>
              <div class="field">
                <label>Canal de venda</label>
                <input id="vCanal" placeholder="Ex: Shopee, Mercado Livre, WhatsApp..." />
              </div>
            </div>

            <div class="field">
              <label>Produto (estoque)</label>
              <select id="vProdutoSelect"></select>
              <div class="hint">A lista vem da tela Estoque.</div>
            </div>

            <div class="row">
              <div class="field">
                <label>Valor de venda (R$)</label>
                <input id="vValor" type="number" placeholder="Ex: 199.90" />
              </div>
              <div class="field">
                <label>Comiss√£o (R$)</label>
                <input id="vComissao" type="number" placeholder="Ex: 20" />
              </div>
            </div>

            <div class="row">
              <div class="field">
                <label>Frete (+ receita / - pago) (R$)</label>
                <input id="vFrete" type="number" placeholder="Ex: 0, 15, -12" />
              </div>
              <div class="field">
                <label>Outros custos (R$)</label>
                <input id="vOutros" type="number" placeholder="Ex: 5" />
              </div>
            </div>

            <div class="row">
              <div class="field">
                <label>Margem (R$) (auto)</label>
                <input id="vMargem" type="number" disabled />
              </div>
              <div class="field">
                <label>Markup (%) (auto)</label>
                <input id="vMarkup" type="number" disabled />
              </div>
            </div>

            <button class="btn btn-primary" id="btnSalvarVenda" type="button">Salvar venda</button>
            <div class="hint">C√°lculo usa custo do produto (Estoque) + comiss√£o + frete pago (negativo) + outros custos.</div>
          </div>
        </div>

        <div class="card">
          <div class="head">
            <div>
              <h2>Vendas</h2>
              <span>Filtrar por m√™s + editar/excluir</span>
            </div>
          </div>
          <div class="body" style="padding-bottom:12px">
            <div class="row">
              <div class="field">
                <label>M√™s (MM/AAAA)</label>
                <select id="vMesFiltro"></select>
              </div>
              <div class="field">
                <label>Buscar (canal/produto)</label>
                <input id="vBusca" placeholder="Ex: shopee, mochila..." />
              </div>
            </div>

            <div class="summary">
              <div class="kpi"><div class="k">Faturamento do m√™s</div><div class="v green" id="vKpiFat">R$ 0,00</div></div>
              <div class="kpi"><div class="k">Margem total</div><div class="v" id="vKpiMargem">R$ 0,00</div></div>
              <div class="kpi"><div class="k">Vendas</div><div class="v" id="vKpiQtd">0</div></div>
              <div class="kpi"><div class="k">Markup m√©dio</div><div class="v" id="vKpiMarkupMed">0%</div></div>
            </div>
          </div>
          <div class="list" id="vLista">
            <div class="empty">Nenhuma venda.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ESTOQUE -->
    <div class="hidden" id="estoqueBox">
      <div class="grid">
        <div class="card">
          <div class="head">
            <div>
              <h2>Cadastrar produto</h2>
              <span>Nome ‚Ä¢ SKU ‚Ä¢ Custo ‚Ä¢ Estoque</span>
            </div>
          </div>
          <div class="body">
            <div class="field">
              <label>Nome do produto</label>
              <input id="pNome" placeholder="Ex: Mochila X, Camiseta Y..." />
            </div>
            <div class="row">
              <div class="field">
                <label>SKU (opcional)</label>
                <input id="pSku" placeholder="Ex: SKU-001" />
              </div>
              <div class="field">
                <label>Custo (R$)</label>
                <input id="pCusto" type="number" placeholder="Ex: 59.90" />
              </div>
            </div>
            <div class="row">
              <div class="field">
                <label>Pre√ßo de venda (opcional)</label>
                <input id="pPreco" type="number" placeholder="Ex: 199.90" />
              </div>
              <div class="field">
                <label>Estoque atual</label>
                <input id="pEstoque" type="number" placeholder="Ex: 10" />
              </div>
            </div>

            <button class="btn btn-primary" id="btnSalvarProduto" type="button">Salvar produto</button>
            <div class="hint">A tela Vendas usa esta lista.</div>
          </div>
        </div>

        <div class="card">
          <div class="head">
            <div>
              <h2>Produtos</h2>
              <span>Editar / Excluir</span>
            </div>
          </div>
          <div class="body" style="padding-bottom:12px">
            <div class="searchBox" style="margin-top:0">
              <input id="pBusca" placeholder="üîé Buscar produto..." />
              <div class="smallNote" id="pBuscaInfo">Mostrando tudo</div>
            </div>
          </div>
          <div class="list" id="pLista">
            <div class="empty">Nenhum produto.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- FORNECEDORES -->
    <div class="hidden" id="fornecBox">
      <div class="grid">
        <div class="card">
          <div class="head">
            <div>
              <h2>Cadastrar fornecedor</h2>
              <span>Nome ‚Ä¢ Contato ‚Ä¢ Observa√ß√£o</span>
            </div>
          </div>
          <div class="body">
            <div class="field">
              <label>Nome</label>
              <input id="fNome" placeholder="Ex: Fornecedor ABC" />
            </div>
            <div class="row">
              <div class="field">
                <label>Telefone (opcional)</label>
                <input id="fTelefone" placeholder="Ex: (11) 99999-9999" />
              </div>
              <div class="field">
                <label>E-mail (opcional)</label>
                <input id="fEmail" placeholder="Ex: contato@..." />
              </div>
            </div>
            <div class="field">
              <label>Observa√ß√£o (opcional)</label>
              <input id="fObs" placeholder="Ex: prazos, cat√°logo, condi√ß√µes..." />
            </div>

            <button class="btn btn-primary" id="btnSalvarFornecedor" type="button">Salvar fornecedor</button>
          </div>
        </div>

        <div class="card">
          <div class="head">
            <div>
              <h2>Fornecedores</h2>
              <span>Editar / Excluir</span>
            </div>
          </div>
          <div class="body" style="padding-bottom:12px">
            <div class="searchBox" style="margin-top:0">
              <input id="fBusca" placeholder="üîé Buscar fornecedor..." />
              <div class="smallNote" id="fBuscaInfo">Mostrando tudo</div>
            </div>
          </div>
          <div class="list" id="fLista">
            <div class="empty">Nenhum fornecedor.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- CATEGORIAS -->
    <div class="hidden" id="categoriasBox">
      <div class="grid">
        <div class="card">
          <div class="head">
            <div>
              <h2>Cadastrar categoria</h2>
              <span>Adicionar e excluir categorias</span>
            </div>
          </div>
          <div class="body">
            <div class="row">
              <div class="field">
                <label>Nome da categoria</label>
                <input id="catNome" placeholder="Ex: Vendas, Tr√°fego, Fornecedor..." />
              </div>
              <div class="field" style="display:flex;align-items:flex-end">
                <button class="btn btn-primary" id="btnSalvarCategoria" type="button" style="width:100%">Adicionar</button>
              </div>
            </div>
            <div class="hint">As categorias aparecem em Finan√ßas (manual/CSV/OFX) e no filtro.</div>
          </div>
        </div>

        <div class="card">
          <div class="head">
            <div>
              <h2>Minhas categorias</h2>
              <span>Excluir</span>
            </div>
          </div>
          <div class="list" id="catLista">
            <div class="empty">Carregando‚Ä¶</div>
          </div>
        </div>
      </div>
    </div>

    <!-- METAS -->
    <div class="hidden" id="metasBox">
      <div class="card">
        <div class="head">
          <h2>Metas & Progresso</h2>
          <span>Progresso conta VENDAS (tela Vendas)</span>
        </div>
        <div class="body">
          <div class="row">
            <div class="field">
              <label>M√™s da meta (MM/AAAA)</label>
              <input id="metaMes" placeholder="Ex: 02/2026" />
            </div>
            <div class="field">
              <label>Meta do m√™s (R$)</label>
              <input id="metaValor" type="number" placeholder="Ex: 3000" />
            </div>
          </div>
          <button class="btn btn-primary" id="btnSalvarMeta" type="button">Salvar meta</button>

          <div style="height:18px"></div>

          <div class="summary">
            <div class="kpi"><div class="k">Meta</div><div class="v" id="metaKpi">R$ 0,00</div></div>
            <div class="kpi"><div class="k">Faturamento do m√™s</div><div class="v green" id="ganheiKpi">R$ 0,00</div></div>
            <div class="kpi"><div class="k">Falta</div><div class="v red" id="faltaKpi">R$ 0,00</div></div>
            <div class="kpi"><div class="k">M√©dia por dia</div><div class="v" id="mediaDiaKpi">R$ 0,00</div></div>
          </div>

          <div style="height:14px"></div>
          <div class="field">
            <label>Progresso</label>
            <div class="catBox" style="padding:10px">
              <div style="height:12px;border-radius:999px;background:rgba(148,163,184,.10);border:1px solid rgba(148,163,184,.10);overflow:hidden">
                <div style="height:100%;width:0%;background:linear-gradient(90deg,var(--cyan),rgba(34,197,94,.85));border-radius:999px;transition:width .25s ease" id="bar"></div>
              </div>
              <div class="hint" id="progressText">0% da meta</div>
            </div>
          </div>

          <div style="height:14px"></div>

          <div class="card" style="background:transparent;border:none;box-shadow:none">
            <div class="head" style="padding:0 0 10px 0;border:none">
              <div>
                <h2>Faturamento por dia</h2>
                <span>Selecione um m√™s para visualizar</span>
              </div>
              <div style="min-width:220px">
                <select id="metaGrafMes"></select>
              </div>
            </div>
            <div class="body" style="padding:0">
              <div class="catBox" style="height:280px">
                <canvas id="chartFaturamentoMeta" style="width:100%;height:100%"></canvas>
              </div>
              <div class="hint" id="metaChartHint">Atualizando‚Ä¶</div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- DASHBOARD -->
    <div class="hidden" id="dashboardBox">
      <div class="card">
        <div class="head">
          <div>
            <h2>Dashboard</h2>
            <span id="dashTitleSub">Somente m√™s selecionado</span>
          </div>

          <div class="dashControls">
            <div style="min-width:240px">
              <label style="display:block;margin-bottom:6px;color:rgba(226,232,240,.72);font-size:12px">M√™s do Dashboard</label>
              <select id="dashMesSelect"></select>
            </div>

            <label class="toggle">
              <input id="chkComparar" type="checkbox" />
              Comparar meses
            </label>

            <div class="hint" id="dashMonthLabel">M√™s: ‚Äî</div>
          </div>
        </div>

        <div class="body">
          <div class="multiMonths hidden" id="multiMonthsWrap">
            <div style="flex:1; min-width:260px">
              <label>Selecione os meses (Ctrl + clique para v√°rios)</label>
              <select id="dashMonthsMulti" multiple></select>
              <div class="hint">Dica: selecione 2 a 6 meses para comparar.</div>
            </div>
            <div style="min-width:220px;flex:1">
              <label>Atalho r√°pido</label>
              <select id="dashQuickRange">
                <option value="0">‚Äî</option>
                <option value="2">√öltimos 2 meses</option>
                <option value="3">√öltimos 3 meses</option>
                <option value="6">√öltimos 6 meses</option>
                <option value="12">√öltimos 12 meses</option>
              </select>
              <div class="hint">Isso preenche a sele√ß√£o automaticamente.</div>
              <button class="btn btn-primary" id="btnAplicarComparacao" type="button">Aplicar compara√ß√£o</button>
            </div>
          </div>

          <div style="height:12px"></div>

          <div class="dashGrid">
            <div class="card">
              <div class="head"><h2>Resumo r√°pido</h2><span>M√™s do Dashboard</span></div>
              <div class="body">
                <div class="summary">
                  <div class="kpi"><div class="k">Entradas</div><div class="v green" id="dashEntradas">R$ 0,00</div></div>
                  <div class="kpi"><div class="k">Sa√≠das</div><div class="v red" id="dashSaidas">R$ 0,00</div></div>
                  <div class="kpi"><div class="k">Saldo</div><div class="v" id="dashSaldo">R$ 0,00</div></div>
                  <div class="kpi"><div class="k">Registros</div><div class="v" id="dashQtd">0</div></div>
                </div>
                <div class="hint" id="dashHintResumo">Atualizando‚Ä¶</div>
              </div>
            </div>

            <div class="card">
              <div class="head"><h2>Top categorias</h2><span>M√™s do Dashboard</span></div>
              <div class="body">
                <div class="catBox" id="topCatsBox"><div class="empty">Sem dados ainda.</div></div>
                <div class="hint" id="dashHintCats">‚Äî</div>
              </div>
            </div>

            <div class="card">
              <div class="head"><h2>Saldo dia a dia</h2><span>Acumulado no m√™s</span></div>
              <div class="body">
                <div class="catBox" style="height:260px"><canvas id="chartDiario" style="width:100%;height:100%"></canvas></div>
                <div class="hint" id="dashHintDiario">Atualizando‚Ä¶</div>
              </div>
            </div>

            <div class="card">
              <div class="head"><h2>Compara√ß√£o por m√™s</h2><span>Comparar meses</span></div>
              <div class="body">
                <div class="catBox" style="height:260px"><canvas id="chartComparacao" style="width:100%;height:100%"></canvas></div>
                <div class="hint" id="dashHintComparacao">Selecione meses para comparar.</div>
              </div>
            </div>

            <div class="card" style="grid-column: 1 / -1;">
              <div class="head"><h2>Alertas inteligentes</h2><span>Rodap√© do dashboard</span></div>
              <div class="body">
                <div id="dashAlerts"><div class="empty">Carregando‚Ä¶</div></div>
                <div class="hint" id="dashHintAlerts">‚Äî</div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="toast" id="toast">
    <div>‚ö†Ô∏è</div>
    <div>
      <b id="toastTitle">Aviso</b>
      <div class="small" id="toastMsg"></div>
    </div>
  </div>

  <!-- Modal excluir (finan√ßas) -->
  <div class="modalOverlay" id="modalOverlay">
    <div class="modal sm">
      <div class="modalHead">
        <h3>Confirmar exclus√£o</h3>
        <button class="btn btn-ghost btn-icon" id="btnModalClose" type="button">‚úï</button>
      </div>
      <div class="modalBody" id="modalBody">Tem certeza?</div>
      <div class="modalFoot">
        <button class="btn btn-ghost" id="btnCancelar" type="button">Cancelar</button>
        <button class="btn btn-danger" id="btnConfirmar" type="button">Excluir</button>
      </div>
    </div>
  </div>

  <!-- Modal editar lan√ßamento (finan√ßas) -->
  <div class="modalOverlay" id="editOverlay">
    <div class="modal sm">
      <div class="modalHead">
        <h3>Editar lan√ßamento</h3>
        <button class="btn btn-ghost btn-icon" id="btnEditClose" type="button">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="row">
          <div class="field"><label>Data (DD/MM/AAAA)</label><input id="editData" /></div>
          <div class="field">
            <label>Tipo</label>
            <select id="editTipo">
              <option value="entrada">Entrada</option>
              <option value="saida">Sa√≠da</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="field"><label>Valor (R$)</label><input id="editValor" type="number" /></div>
          <div class="field"><label>Categoria</label><input id="editCategoria" placeholder="Ex: Vendas, Mercado..." list="catDatalist" /></div>
        </div>
        <div class="field"><label>Banco</label><select id="editBancoSelect"></select></div>
        <div class="field"><label>Descri√ß√£o</label><input id="editDescricao" /></div>
        <div class="hint">Ao salvar, o m√™s (MM/AAAA) √© recalculado pela data.</div>
      </div>
      <div class="modalFoot">
        <button class="btn btn-ghost" id="btnEditCancelar" type="button">Cancelar</button>
        <button class="btn btn-primary" id="btnEditSalvar" type="button">Salvar altera√ß√µes</button>
      </div>
    </div>
  </div>

  <!-- Modal editar venda -->
  <div class="modalOverlay" id="vEditOverlay">
    <div class="modal sm">
      <div class="modalHead">
        <h3>Editar venda</h3>
        <button class="btn btn-ghost btn-icon" id="btnVEditClose" type="button">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="row">
          <div class="field"><label>Data (DD/MM/AAAA)</label><input id="vEditData" /></div>
          <div class="field"><label>Canal</label><input id="vEditCanal" /></div>
        </div>
        <div class="field"><label>Produto</label><select id="vEditProdutoSelect"></select></div>
        <div class="row">
          <div class="field"><label>Valor de venda (R$)</label><input id="vEditValor" type="number" /></div>
          <div class="field"><label>Comiss√£o (R$)</label><input id="vEditComissao" type="number" /></div>
        </div>
        <div class="row">
          <div class="field"><label>Frete (+/-) (R$)</label><input id="vEditFrete" type="number" /></div>
          <div class="field"><label>Outros custos (R$)</label><input id="vEditOutros" type="number" /></div>
        </div>
        <div class="row">
          <div class="field"><label>Margem (R$) (auto)</label><input id="vEditMargem" type="number" disabled /></div>
          <div class="field"><label>Markup (%) (auto)</label><input id="vEditMarkup" type="number" disabled /></div>
        </div>
        <div class="hint">Frete positivo = receita / frete negativo = custo.</div>
      </div>
      <div class="modalFoot">
        <button class="btn btn-ghost" id="btnVEditCancelar" type="button">Cancelar</button>
        <button class="btn btn-primary" id="btnVEditSalvar" type="button">Salvar altera√ß√µes</button>
      </div>
    </div>
  </div>

  <!-- Modal editar produto -->
  <div class="modalOverlay" id="pEditOverlay">
    <div class="modal sm">
      <div class="modalHead">
        <h3>Editar produto</h3>
        <button class="btn btn-ghost btn-icon" id="btnPEditClose" type="button">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="field"><label>Nome</label><input id="pEditNome" /></div>
        <div class="row">
          <div class="field"><label>SKU</label><input id="pEditSku" /></div>
          <div class="field"><label>Custo (R$)</label><input id="pEditCusto" type="number" /></div>
        </div>
        <div class="row">
          <div class="field"><label>Pre√ßo de venda</label><input id="pEditPreco" type="number" /></div>
          <div class="field"><label>Estoque atual</label><input id="pEditEstoque" type="number" /></div>
        </div>
      </div>
      <div class="modalFoot">
        <button class="btn btn-ghost" id="btnPEditCancelar" type="button">Cancelar</button>
        <button class="btn btn-primary" id="btnPEditSalvar" type="button">Salvar altera√ß√µes</button>
      </div>
    </div>
  </div>

  <!-- Modal editar fornecedor -->
  <div class="modalOverlay" id="fEditOverlay">
    <div class="modal sm">
      <div class="modalHead">
        <h3>Editar fornecedor</h3>
        <button class="btn btn-ghost btn-icon" id="btnFEditClose" type="button">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="field"><label>Nome</label><input id="fEditNome" /></div>
        <div class="row">
          <div class="field"><label>Telefone</label><input id="fEditTelefone" /></div>
          <div class="field"><label>E-mail</label><input id="fEditEmail" /></div>
        </div>
        <div class="field"><label>Observa√ß√£o</label><input id="fEditObs" /></div>
      </div>
      <div class="modalFoot">
        <button class="btn btn-ghost" id="btnFEditCancelar" type="button">Cancelar</button>
        <button class="btn btn-primary" id="btnFEditSalvar" type="button">Salvar altera√ß√µes</button>
      </div>
    </div>
  </div>

  <!-- Modal bancos -->
  <div class="modalOverlay" id="bankOverlay">
    <div class="modal sm">
      <div class="modalHead">
        <h3>Gerenciar bancos</h3>
        <button class="btn btn-ghost btn-icon" id="btnBankClose" type="button">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="row">
          <div class="field"><label>Novo banco</label><input id="bankNome" placeholder="Ex: Nubank, Inter, PicPay..." /></div>
          <div class="field" style="display:flex;align-items:flex-end"><button class="btn btn-primary" id="btnBankAdd" type="button" style="width:100%">Adicionar</button></div>
        </div>
        <div class="catBox" style="margin-top:10px">
          <div class="hint" style="margin:0 0 8px 0">Seus bancos</div>
          <div id="bankList" class="empty">Carregando‚Ä¶</div>
        </div>
      </div>
      <div class="modalFoot">
        <button class="btn btn-ghost" id="btnBankFechar2" type="button">Fechar</button>
      </div>
    </div>
  </div>

  <!-- Modal OFX -->
  <div class="modalOverlay" id="ofxOverlay">
    <div class="modal lg">
      <div class="modalHead">
        <h3>Importar OFX (revisar antes de lan√ßar)</h3>
        <button class="btn btn-ghost btn-icon" id="btnOfxClose" type="button">‚úï</button>
      </div>

      <div class="modalBody">
        <div class="ofxTopRow">
          <div class="left">
            <button class="btn btn-ghost" id="btnOfxSelectAll" type="button">‚úÖ Marcar todos</button>
            <button class="btn btn-ghost" id="btnOfxUnselectAll" type="button">‚¨ú Desmarcar todos</button>
            <span class="ofxNote" id="ofxCount">0 itens</span>
          </div>

          <div style="min-width:240px;max-width:360px;width:100%">
            <label>Banco do extrato</label>
            <select id="ofxBancoSelect"></select>
          </div>
        </div>

        <div class="ofxTableWrap">
          <table class="ofx">
            <thead>
              <tr>
                <th class="ofxCheck">OK</th>
                <th class="ofxDate">Data</th>
                <th style="width:140px">Tipo</th>
                <th class="ofxMoney">Valor</th>
                <th style="width:170px">Categoria</th>
                <th>Descri√ß√£o</th>
              </tr>
            </thead>
            <tbody id="ofxTbody">
              <tr><td colspan="6" class="empty">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>

        <div class="hint" id="ofxHint" style="margin-top:10px">Voc√™ pode editar qualquer campo antes de confirmar.</div>
      </div>

      <div class="modalFoot">
        <button class="btn btn-ghost" id="btnOfxCancelar" type="button">Cancelar</button>
        <button class="btn btn-primary" id="btnOfxConfirmar" type="button">Confirmar lan√ßamentos</button>
      </div>
    </div>
  </div>

  <datalist id="catDatalist"></datalist>

<script>
  const SUPABASE_URL = "https://ssnabfzwfvcmwkgibvec.supabase.co";
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzbmFiZnp3ZnZjbXdrZ2lidmVjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwNTE1MjcsImV4cCI6MjA4NTYyNzUyN30.s02EFB4FRopxB7Ak7zWUSkINcGY5ESRn7SLbDXn0Wbo";

  const supa = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
    auth: { persistSession: true, autoRefreshToken: true, detectSessionInUrl: true }
  });

  // UI refs
  const loginBox = document.getElementById("loginBox");
  const financasBox = document.getElementById("financasBox");
  const vendasBox = document.getElementById("vendasBox");
  const estoqueBox = document.getElementById("estoqueBox");
  const fornecBox = document.getElementById("fornecBox");
  const categoriasBox = document.getElementById("categoriasBox");
  const metasBox = document.getElementById("metasBox");
  const dashboardBox = document.getElementById("dashboardBox");

  const tabs = document.getElementById("tabs");
  const tabFin = document.getElementById("tabFin");
  const tabVendas = document.getElementById("tabVendas");
  const tabEstoque = document.getElementById("tabEstoque");
  const tabFornec = document.getElementById("tabFornec");
  const tabCat = document.getElementById("tabCat");
  const tabMeta = document.getElementById("tabMeta");
  const tabDash = document.getElementById("tabDash");

  const pillEmail = document.getElementById("pillEmail");
  const btnSair = document.getElementById("btnSair");
  const btnLogin = document.getElementById("btnLogin");

  const mesSelect = document.getElementById("mesSelect");
  const filtroCategoriaEl = document.getElementById("filtroCategoria");
  const tipoEl = document.getElementById("tipo");
  const dataEl = document.getElementById("data");
  const valorEl = document.getElementById("valor");
  const categoriaEl = document.getElementById("categoria");
  const descricaoEl = document.getElementById("descricao");
  const btnSalvar = document.getElementById("btnSalvar");
  const btnExportar = document.getElementById("btnExportar");
  const btnPdf = document.getElementById("btnPdf");
  const listaEl = document.getElementById("lista");
  const buscaEl = document.getElementById("busca");
  const buscaInfo = document.getElementById("buscaInfo");
  const bancoSelect = document.getElementById("bancoSelect");

  const btnToggleLote = document.getElementById("btnToggleLote");
  const btnExcluirSelecionados = document.getElementById("btnExcluirSelecionados");
  const loteHint = document.getElementById("loteHint");

  const kpiEntradas = document.getElementById("kpiEntradas");
  const kpiSaidas = document.getElementById("kpiSaidas");
  const kpiSaldo = document.getElementById("kpiSaldo");
  const kpiQtd = document.getElementById("kpiQtd");

  const dropZone = document.getElementById("dropZone");
  const fileCsv = document.getElementById("fileCsv");
  const btnImportar = document.getElementById("btnImportar");
  const importInfo = document.getElementById("importInfo");

  const dropZoneOfx = document.getElementById("dropZoneOfx");
  const fileOfx = document.getElementById("fileOfx");
  const btnImportarOfx = document.getElementById("btnImportarOfx");
  const ofxInfo = document.getElementById("ofxInfo");

  const ofxOverlay = document.getElementById("ofxOverlay");
  const btnOfxClose = document.getElementById("btnOfxClose");
  const btnOfxCancelar = document.getElementById("btnOfxCancelar");
  const btnOfxConfirmar = document.getElementById("btnOfxConfirmar");
  const btnOfxSelectAll = document.getElementById("btnOfxSelectAll");
  const btnOfxUnselectAll = document.getElementById("btnOfxUnselectAll");
  const ofxBancoSelect = document.getElementById("ofxBancoSelect");
  const ofxTbody = document.getElementById("ofxTbody");
  const ofxCount = document.getElementById("ofxCount");

  const metaMesEl = document.getElementById("metaMes");
  const metaValorEl = document.getElementById("metaValor");
  const btnSalvarMeta = document.getElementById("btnSalvarMeta");
  const metaKpi = document.getElementById("metaKpi");
  const ganheiKpi = document.getElementById("ganheiKpi");
  const faltaKpi = document.getElementById("faltaKpi");
  const mediaDiaKpi = document.getElementById("mediaDiaKpi");
  const bar = document.getElementById("bar");
  const progressText = document.getElementById("progressText");

  const metaGrafMes = document.getElementById("metaGrafMes");
  const metaChartHint = document.getElementById("metaChartHint");

  const toast = document.getElementById("toast");
  const toastTitle = document.getElementById("toastTitle");
  const toastMsg = document.getElementById("toastMsg");
  let toastTimer = null;

  const modalOverlay = document.getElementById("modalOverlay");
  const modalBody = document.getElementById("modalBody");
  const btnModalClose = document.getElementById("btnModalClose");
  const btnCancelar = document.getElementById("btnCancelar");
  const btnConfirmar = document.getElementById("btnConfirmar");

  const editOverlay = document.getElementById("editOverlay");
  const btnEditClose = document.getElementById("btnEditClose");
  const btnEditCancelar = document.getElementById("btnEditCancelar");
  const btnEditSalvar = document.getElementById("btnEditSalvar");
  const editDataEl = document.getElementById("editData");
  const editTipoEl = document.getElementById("editTipo");
  const editValorEl = document.getElementById("editValor");
  const editCategoriaEl = document.getElementById("editCategoria");
  const editDescricaoEl = document.getElementById("editDescricao");
  const editBancoSelect = document.getElementById("editBancoSelect");

  // Bancos
  const bankOverlay = document.getElementById("bankOverlay");
  const btnGerenciarBancos = document.getElementById("btnGerenciarBancos");
  const btnBankClose = document.getElementById("btnBankClose");
  const btnBankFechar2 = document.getElementById("btnBankFechar2");
  const bankNome = document.getElementById("bankNome");
  const btnBankAdd = document.getElementById("btnBankAdd");
  const bankList = document.getElementById("bankList");

  // Dashboard
  const dashTitleSub = document.getElementById("dashTitleSub");
  const chkComparar = document.getElementById("chkComparar");
  const multiMonthsWrap = document.getElementById("multiMonthsWrap");
  const dashMonthsMulti = document.getElementById("dashMonthsMulti");
  const dashQuickRange = document.getElementById("dashQuickRange");
  const btnAplicarComparacao = document.getElementById("btnAplicarComparacao");

  const dashMesSelect = document.getElementById("dashMesSelect");
  const topCatsBox = document.getElementById("topCatsBox");
  const dashEntradas = document.getElementById("dashEntradas");
  const dashSaidas = document.getElementById("dashSaidas");
  const dashSaldo = document.getElementById("dashSaldo");
  const dashQtd = document.getElementById("dashQtd");
  const dashMonthLabel = document.getElementById("dashMonthLabel");
  const dashHintResumo = document.getElementById("dashHintResumo");
  const dashHintDiario = document.getElementById("dashHintDiario");
  const dashHintCats = document.getElementById("dashHintCats");
  const dashHintComparacao = document.getElementById("dashHintComparacao");
  const dashAlerts = document.getElementById("dashAlerts");
  const dashHintAlerts = document.getElementById("dashHintAlerts");

  // Categorias UI
  const catNome = document.getElementById("catNome");
  const btnSalvarCategoria = document.getElementById("btnSalvarCategoria");
  const catLista = document.getElementById("catLista");
  const catDatalist = document.getElementById("catDatalist");

  // Fornecedores UI
  const fNome = document.getElementById("fNome");
  const fTelefone = document.getElementById("fTelefone");
  const fEmail = document.getElementById("fEmail");
  const fObs = document.getElementById("fObs");
  const btnSalvarFornecedor = document.getElementById("btnSalvarFornecedor");
  const fBusca = document.getElementById("fBusca");
  const fBuscaInfo = document.getElementById("fBuscaInfo");
  const fLista = document.getElementById("fLista");

  const fEditOverlay = document.getElementById("fEditOverlay");
  const btnFEditClose = document.getElementById("btnFEditClose");
  const btnFEditCancelar = document.getElementById("btnFEditCancelar");
  const btnFEditSalvar = document.getElementById("btnFEditSalvar");
  const fEditNome = document.getElementById("fEditNome");
  const fEditTelefone = document.getElementById("fEditTelefone");
  const fEditEmail = document.getElementById("fEditEmail");
  const fEditObs = document.getElementById("fEditObs");

  // Estoque UI
  const pNome = document.getElementById("pNome");
  const pSku = document.getElementById("pSku");
  const pCusto = document.getElementById("pCusto");
  const pPreco = document.getElementById("pPreco");
  const pEstoque = document.getElementById("pEstoque");
  const btnSalvarProduto = document.getElementById("btnSalvarProduto");
  const pBusca = document.getElementById("pBusca");
  const pBuscaInfo = document.getElementById("pBuscaInfo");
  const pLista = document.getElementById("pLista");

  const pEditOverlay = document.getElementById("pEditOverlay");
  const btnPEditClose = document.getElementById("btnPEditClose");
  const btnPEditCancelar = document.getElementById("btnPEditCancelar");
  const btnPEditSalvar = document.getElementById("btnPEditSalvar");
  const pEditNome = document.getElementById("pEditNome");
  const pEditSku = document.getElementById("pEditSku");
  const pEditCusto = document.getElementById("pEditCusto");
  const pEditPreco = document.getElementById("pEditPreco");
  const pEditEstoque = document.getElementById("pEditEstoque");

  // Vendas UI
  const vData = document.getElementById("
